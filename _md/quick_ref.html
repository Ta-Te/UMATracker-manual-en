

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. UMATracker Quick Start Guide &mdash; UMATracker 1.0 ドキュメント</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="UMATracker 1.0 ドキュメント" href="../index.html"/>
        <link rel="next" title="2. UMATracker-FilterGenerator Block Reference" href="block_ref.html"/>
        <link rel="prev" title="Welcome to UMATracker’s documentation!" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> UMATracker
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. UMATracker Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#summary">1.1. Summary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#umatracker-can-do">1.1.1. UMATracker Can Do</a></li>
<li class="toctree-l3"><a class="reference internal" href="#umatracker-cannot-do-currently">1.1.2. UMATracker Cannot Do (Currently)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#basic-workflow">1.2. Basic Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#umatracker-filtergenerator">1.3. UMATracker-FilterGenerator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#filtergenerator-window">1.3.1. FilterGenerator Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-block-operation">1.3.2. Filter Block Operation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#initial-block-state">1.3.2.1. Initial Block State</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-block">1.3.2.2. Add Block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remove-block">1.3.2.3. Remove Block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block-types">1.3.2.4. Block Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-make-your-own-filter">1.3.3. How to Make your own Filter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#open-the-video-file">1.3.3.1. Open the Video File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate-background">1.3.3.2. Generate Background</a></li>
<li class="toctree-l4"><a class="reference internal" href="#color-filtering">1.3.3.3. Color Filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="#convert-to-gray-scale">1.3.3.4. Convert to Gray Scale</a></li>
<li class="toctree-l4"><a class="reference internal" href="#binarize">1.3.3.5. Binarize</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exclude-the-obstacle-by-the-region-selector">1.3.3.6. Exclude the Obstacle by the Region Selector</a></li>
<li class="toctree-l4"><a class="reference internal" href="#noise-reduction">1.3.3.7. Noise Reduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#save-filter-data">1.3.3.8. Save Filter Data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#umatracker-tracking">1.4. UMATracker-Tracking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tracking-window">1.4.1. Tracking Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-the-video-and-its-filter-data">1.4.2. Load the Video and its Filter data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-the-parameter">1.4.3. Set the Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="block_ref.html">2. UMATracker-FilterGenerator Block Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">UMATracker</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>1. UMATracker Quick Start Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/_md/quick_ref.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="umatracker-quick-start-guide">
<span id="umatracker-quick-start-guide"></span><h1>1. UMATracker Quick Start Guide<a class="headerlink" href="#umatracker-quick-start-guide" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="summary">
<span id="summary"></span><h2>1.1. Summary<a class="headerlink" href="#summary" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><strong>UMATracker</strong>は個体追跡，およびその結果の解析を提供するソフトウェア群である．</p>
<p><strong>UMATracker</strong>は,</p>
<ul class="simple">
<li><strong>UMATracker-FilterGenerator</strong></li>
<li><strong>UMATracker-Tracking</strong></li>
<li><strong>UMATracker-TrackingCorrector</strong></li>
<li><strong>UMATracker-Area51</strong></li>
</ul>
<p>という4つのソフトウェアに別れており，各ソフトウェアを組み合わせることで動画の前処理・個体追跡・結果の修正・結果の解析を行うことが出来る．</p>
<div class="section" id="umatracker-can-do">
<span id="umatracker-can-do"></span><h3>1.1.1. UMATracker Can Do<a class="headerlink" href="#umatracker-can-do" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>ブロックの組み合わせによる解析動画の下処理（<strong>UMATracker-FilterGenerator</strong>）．</li>
<li>追跡対象の個体数が常に一定なビデオを使った個体追跡（<strong>UMATracker-Tracking</strong>）．</li>
<li>追跡対象の骨格・形状・向きの推定（<strong>UMATracker-Tracking</strong>）．</li>
<li>個体追跡結果の修正（<strong>UMATracker-TrackingCorrector</strong>）．</li>
<li>Region-Of-Interest・個体間インタラクションなど，追跡結果の解析（<strong>UMATracker-Area51</strong>）．</li>
</ul>
</div>
<div class="section" id="umatracker-cannot-do-currently">
<span id="umatracker-cannot-do-currently"></span><h3>1.1.2. UMATracker Cannot Do (Currently)<a class="headerlink" href="#umatracker-cannot-do-currently" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>追跡対象の個体数が増減するビデオをつかった個体追跡．</li>
<li><strong>UMATracker-FilterGenerator</strong>による前処理によって追跡対象を抽出できない場合の個体追跡．</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">現状出来ないことに関しても，プラグインを作成・使用することで対応可能となっている．本件に関してはプラグイン作成マニュアルで別途触れる．</p>
</div>
<p>本Quick Start Guideでは個体追跡に絞って使用方法を解説する．</p>
</div>
</div>
<div class="section" id="basic-workflow">
<span id="basic-workflow"></span><h2>1.2. Basic Workflow<a class="headerlink" href="#basic-workflow" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><img alt="txt" src="../_images/uma_summary_sequence.png" /></p>
<p><strong>UMATracker</strong>による個体追跡は,</p>
<ol class="simple">
<li><strong>UMATracker-FilterGenerator</strong>で動画の下処理のためのフィルタを作成し，</li>
<li><strong>UMATracker-Tracking</strong>において<strong>UMATracker-FilterGenerator</strong>で作成したフィルタを用いて個体追跡を行い，</li>
<li><strong>UMATracker-TrackingCorrector</strong>を使って，<strong>UMATracker-Tracking</strong>で得られた個体追跡結果を修正し，</li>
<li><strong>UMATracker-Area51</strong>をもちいて追跡結果の解析を行う</li>
</ol>
<p>という流れになっている．</p>
</div>
<div class="section" id="umatracker-filtergenerator">
<span id="umatracker-filtergenerator"></span><h2>1.3. UMATracker-FilterGenerator<a class="headerlink" href="#umatracker-filtergenerator" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>個体追跡を行いたい動画に対して前処理として画像フィルタをかけて個体の位置を抽出することで，個体追跡の精度を高めることが出来る．
そこでまず<strong>UMATracker-FilterGenerator</strong>を使用し，ブロックを組み合わせることで画像フィルタを作成する．</p>
<div class="section" id="filtergenerator-window">
<span id="filtergenerator-window"></span><h3>1.3.1. FilterGenerator Window<a class="headerlink" href="#filtergenerator-window" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下に<strong>UMATracker-FilterGenerator</strong>の画面各部の名称および説明を示す．
<img alt="txt" src="../_images/uma_filtergenerator_mainwindow.png" /></p>
<ol>
<li><p class="first">フィルタツールチップ</p>
<p>利用出来るブロックの一覧が表示されるツールチップ．入力画像を変化させる画像フィルタが各ブロックに割り当てらており，
ブロックを組み合わせることで個体を抽出するような画像フィルタを作成する．</p>
</li>
<li><p class="first">フィルタブロック</p>
<p>このブロックをドラッグ・アンド・ドロップし，ブロックをつなぎ合わせることで個体を抽出する画像フィルタを作成する．</p>
</li>
<li><p class="first">キャンバス</p>
<p>フィルタブロックを配置し，フィルタ群を作成する場所．</p>
</li>
<li><p class="first">入力画面</p>
<p>入力動画が表示される．</p>
</li>
<li><p class="first">出力画面</p>
<p>入力した動画に対してキャンバスに設置したフィルタを適応した結果が表示される．</p>
</li>
<li><p class="first">Background生成メニュー</p>
<p>入力動画の背景を抽出し，除去する．</p>
</li>
</ol>
</div>
<div class="section" id="filter-block-operation">
<span id="filter-block-operation"></span><h3>1.3.2. Filter Block Operation<a class="headerlink" href="#filter-block-operation" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>上述のキャンバス上でブロックを組み合わせることで，画像フィルタを作成する．
本節ではブロックの操作方法について説明する．</p>
<div class="section" id="initial-block-state">
<span id="initial-block-state"></span><h4>1.3.2.1. Initial Block State<a class="headerlink" href="#initial-block-state" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="txt" src="../_images/uma_filtergenerator_initblock.png" /></p>
<p>起動時には<code class="docutils literal"><span class="pre">Output</span></code>ブロックと<code class="docutils literal"><span class="pre">Input</span></code>ブロックのみがキャンバス上に表示される．
<code class="docutils literal"><span class="pre">Input</span></code>はソフトウェアに読み込ませた動画像のことを指しており，上述の『入力画面』に表示されている動画像のことである．</p>
<p>そして，<code class="docutils literal"><span class="pre">Output</span></code>ブロックに接続されたブロックのデータが上述の『出力画面』に表示される．
これらの<code class="docutils literal"><span class="pre">Input</span></code>ブロックと<code class="docutils literal"><span class="pre">Output</span></code>ブロックの間に各フィルタを意味するブロックを複数挟み込むことで画像フィルタを表現することが出来る．
この例では<code class="docutils literal"><span class="pre">Input</span></code>ブロックが<code class="docutils literal"><span class="pre">Output</span></code>ブロックに直接接続されているので，<code class="docutils literal"><span class="pre">Input</span></code>ブロックのデータ，すなわち『入力画面』に表示された動画像が
そのまま『出力画面』に表示される．</p>
</div>
<div class="section" id="add-block">
<span id="add-block"></span><h4>1.3.2.2. Add Block<a class="headerlink" href="#add-block" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>キャンバス上のブロック群へブロックを追加するには，フィルタツールチップからブロックをドラック＆ドロップすればよい．
<img alt="txt" src="../_images/uma_filtergenerator_blockadding.png" />
<img alt="txt" src="../_images/uma_filtergenerator_blockadded.png" /></p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">ドラッグ＆ドロップではなく，フィルタツールチップ上でフォーカス中に右クリックすることでもフィルタを追加することができる．</p>
</div>
<p>たとえばフィルタツールチップ<code class="docutils literal"><span class="pre">Filters</span></code>内の<code class="docutils literal"><span class="pre">BGRToGray</span></code>を追加すると，『出力画面』が『入力画面』のグレースケールへ変化する．
このことから<code class="docutils literal"><span class="pre">BGRToGray</span></code>がグレースケールフィルタを意味していることがわかる．</p>
<p><img alt="txt" src="../_images/uma_filtergenerator_dataflow.png" /></p>
<p>このとき入出力は，</p>
<ol class="simple">
<li>『入力画面』に表示された動画像が<code class="docutils literal"><span class="pre">Input</span></code>ブロックを通して，</li>
<li><code class="docutils literal"><span class="pre">BGRToGray</span></code>ブロックに入力される．このブロックが入力されたデータをグレースケール動画像へ変換し，</li>
<li>変換後の動画像が<code class="docutils literal"><span class="pre">Output</span></code>ブロックに入力される．</li>
<li>そして，<code class="docutils literal"><span class="pre">Output</span></code>ブロックに入力された動画像が『出力画面』に反映される．</li>
</ol>
<p>という流れとなっている．</p>
</div>
<div class="section" id="remove-block">
<span id="remove-block"></span><h4>1.3.2.3. Remove Block<a class="headerlink" href="#remove-block" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>不要になったブロックを削除するには，『フィルタツールチップ』もしくは『キャンバス』上のゴミ箱へブロックをドラッグ＆ドロップすれば良い．
<img alt="txt" src="../_images/uma_filtergenerator_blockremoving.png" /></p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p>Outputブロックとブロックが離れている場合，使われていないブロックがある場合にはエラーとなり，出力が『出力画面』に反映されなくなる．</p>
<table border="1" class="last docutils" id="id1">
<caption><span class="caption-text">Error Examples</span><a class="headerlink" href="#id1" title="このテーブルへのパーマリンク">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Blocks</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="../_images/uma_filtergenerator_disconnectedoutputblock.png" class="first last" src="../_images/uma_filtergenerator_disconnectedoutputblock.png" />
</td>
<td>ブロックとブロックが離れている場合．</td>
</tr>
<tr class="row-odd"><td><img alt="../_images/uma_filtergenerator_unusedblock.png" class="first last" src="../_images/uma_filtergenerator_unusedblock.png" />
</td>
<td>使われていないブロックがある場合．</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="block-types">
<span id="block-types"></span><h4>1.3.2.4. Block Types<a class="headerlink" href="#block-types" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>ブロックは入力/出力があるかで3種類にわけることができる．</p>
<p><strong>入力/出力ブロックには画像フィルタが割り当てられており，入力ブロックからの動画像をフィルタで変換したものを出力する．</strong></p>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-text">Block I/O Types</span><a class="headerlink" href="#id2" title="このテーブルへのパーマリンク">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Block Example</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="../_images/uma_filtergenerator_inputonlyblock.png" class="first last" src="../_images/uma_filtergenerator_inputonlyblock.png" />
</td>
<td>入力ブロック</td>
<td>入力のみを受け付けるブロック．</td>
</tr>
<tr class="row-odd"><td><img alt="../_images/uma_filtergenerator_inputoutputblock.png" class="first last" src="../_images/uma_filtergenerator_inputoutputblock.png" />
</td>
<td>入力/出力ブロック</td>
<td>入力と出力の両方をそなえたブロック．</td>
</tr>
<tr class="row-even"><td><img alt="../_images/uma_filtergenerator_outputonlyblock.png" class="first last" src="../_images/uma_filtergenerator_outputonlyblock.png" />
</td>
<td>出力ブロック</td>
<td>出力のみをもつブロック．</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="how-to-make-your-own-filter">
<span id="how-to-make-your-own-filter"></span><h3>1.3.3. How to Make your own Filter<a class="headerlink" href="#how-to-make-your-own-filter" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><img alt="txt" src="../_images/uma_filtergenerator_processed.png" />
<strong>UMATracker-FilterGenerator</strong>では，個体追跡したい物体の場所が白くなるフィルタを作成することが目標である．上図ではアリのいた場所のみ白くなっていることがわかる．
そのためには</p>
<ol class="simple">
<li>グレースケール変換</li>
<li>二値化</li>
<li>解析に不要な領域の除去</li>
<li>ノイズ除去</li>
</ol>
<p>という手順をふむ必要がある．</p>
<p>追跡物体が背景と十分なコントラスト差をもっているときはこの手順で十分個体追跡が可能だが，そうでない場合は前段階として</p>
<ol class="simple">
<li>背景の除去</li>
<li>色選択による追跡物体の抽出</li>
</ol>
<p>のいずれかをおこなうことで精度よく個体追跡が出来るようになる．</p>
<p><img alt="txt" src="../_images/uma_filtergenerator_filtermakingsequence.png" /></p>
<iframe width="640" height="360" src="//www.youtube.com/embed/PEWX8cctaSQ?feature=player_detailpage" frameborder="0" allowfullscreen="1">&nbsp;</iframe><div class="section" id="open-the-video-file">
<span id="open-the-video-file"></span><h4>1.3.3.1. Open the Video File<a class="headerlink" href="#open-the-video-file" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>メニューより<code class="docutils literal"><span class="pre">Files/Open</span> <span class="pre">Video</span> <span class="pre">File</span></code>を選択，もしくはビデオファイルをウインドウにドラッグアンドドロップすることで解析に使用するビデオを読み込む．
<img alt="txt" src="../_images/uma_filtergenerator_openfile.png" /></p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">ファイルサイズが大きい（GB単位），もしくは長時間のビデオ（15分以上）を読み込むとソフトウェアの動作が遅くなる場合がある．そのような時はビデオを扱う場合は事前にエンコード・動画の分割を行うと解決される．</p>
</div>
</div>
<div class="section" id="generate-background">
<span id="generate-background"></span><h4>1.3.3.2. Generate Background<a class="headerlink" href="#generate-background" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>背景除去を行うには，メニューより<code class="docutils literal"><span class="pre">Background/Create</span> <span class="pre">Background</span></code>を選択しバックグラウンド生成ダイアログを表示する．</p>
<p><img alt="txt" src="../_images/uma_filtergenerator_bgsubdialog.png" /></p>
<p>まず背景生成に使用するビデオの始点と終点を指定する．
スライダーを動かして，背景生成に使用する動画の始点を選び，Set Minボタンをクリックする．
すると，始点以降のスライダーバーの色が赤に変化する．
同様にスライダーを動かして，背景生成に使用する動画の終点を選び，Set Maxボタンをクリックすると
終点以前のスライダーバーの色が赤になる．
スライダーバーが赤色の部分のビデオが背景生成に使用される．</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">正しく背景生成を行うためには，動画の背景が静的（コントラストや位置が変化しない）であることが必要である．背景生成に使用するビデオの始点と終点を指定することで，背景が安定しない撮影開始時・終了時など背景生成に使用したくない部分を除くことが出来る．</p>
</div>
<p>つぎに解析に使うビデオのフレーム間隔をFrame deltaで指定する．</p>
<p>以上を指定後Generateボタンを押すと背景生成が開始される．
背景生成終了後，結果がダイアログ右側のビューに背景除去された結果が反映されるので，スライダーを動かして背景除去に成功しているか確認する．</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">背景生成に使用するフレーム数が多ければ安定して背景生成できるが，処理に時間が掛かる．このようなときは生成に使用するビデオの始点と終点，Frame Deltaを調整する．</p>
</div>
<p><img alt="txt" src="../_images/uma_filtergenerator_bgsubexample.png" /></p>
<iframe width="640" height="360" src="//www.youtube.com/embed/za1jzU0K56k?feature=player_detailpage" frameborder="0" allowfullscreen="1">&nbsp;</iframe></div>
<div class="section" id="color-filtering">
<span id="color-filtering"></span><h4>1.3.3.3. Color Filtering<a class="headerlink" href="#color-filtering" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>カラーマーカーが付いている場合など追跡物体が特徴的な色を有している場合，その色を抽出するフィルタを作成することで追跡物体を抽出することができる．</p>
<table border="1" class="docutils" id="id3">
<caption><span class="caption-text">ColorFilter</span><a class="headerlink" href="#id3" title="このテーブルへのパーマリンク">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Block</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="../_images/uma_filtergenerator_colorfilter.png" class="first last" src="../_images/uma_filtergenerator_colorfilter.png" />
</td>
<td>右のカラーパレットで色を選択し左の類似度（数値）を調整することで色を選択する．</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal"><span class="pre">Color</span> <span class="pre">Filter</span></code>は<code class="docutils literal"><span class="pre">Filters</span></code>ツールチップに含まれている．
ブロック左の赤色の部分をクリックするとカラーパレットがひらき，抽出したい色を選択することができる．
ブロック右の数値入力欄は色の類似度を表しており，選択した色とどの程度類似した色を抽出するか調整可能となっている．</p>
<p><img alt="txt" src="../_images/uma_filtergenerator_colorfilterio.png" /></p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">ColorFilterブロックを選択後，『入力画面』上の抽出したい色の部分をクリックすることで色を選択することもできる．</p>
</div>
<iframe width="640" height="360" src="//www.youtube.com/embed/3ktUtdCrQzk?feature=player_detailpage" frameborder="0" allowfullscreen="1">&nbsp;</iframe></div>
<div class="section" id="convert-to-gray-scale">
<span id="convert-to-gray-scale"></span><h4>1.3.3.4. Convert to Gray Scale<a class="headerlink" href="#convert-to-gray-scale" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>個体追跡したい物体の場所のみが白くなるフィルタを作成するためには，その前にカラー画像を各ピクセルが0 - 255の値を持つグレースケール画像に変換する必要がある．
そこで<code class="docutils literal"><span class="pre">Filters</span></code>ツールチップに含まれる<code class="docutils literal"><span class="pre">BGRToGray</span></code>ブロックを用いて，カラー画像をグレースケール画像に変換する．</p>
<p>背景除去を行った後のアリの動画で<code class="docutils literal"><span class="pre">BGRToGray</span></code>ブロックを用いた例を示す．
<img alt="txt" src="../_images/uma_filtergenerator_blockadded.png" />
<img alt="txt" src="../_images/uma_filtergenerator_bgrtograyexample.png" /></p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">例では見た目に変化はないが，必須の作業なので二値化の前に必ずおこなうこと．</p>
</div>
</div>
<div class="section" id="binarize">
<span id="binarize"></span><h4>1.3.3.5. Binarize<a class="headerlink" href="#binarize" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="txt" src="../_images/uma_filtergenerator_grayscale.png" />
グレースケール画像は各ピクセルが0 - 255の値を持っており，値0が黒をあらわし255に近い値であるほどそのピクセルは白に近い色となる．
前述のグレースケール変換では画像の追跡したい固体の部分が明るく抜き出されているので，その部分のみを白く抜き出せば最初の目標の画像に到達できる．</p>
<p>そこで，<code class="docutils literal"><span class="pre">Threshold</span></code>ブロックをもちいて二値化をおこなう．
二値化とは，グレースケール画像を白と黒の2階調画像に変換することであり，ある閾値を定めて，各ピクセルの値がその閾値を上回っているとき255（白），そうでないときは0（黒）にそのピクセルの値を変換する画像フィルタである．</p>
<p><code class="docutils literal"><span class="pre">Threshold</span></code>ブロックの右側の数値入力欄が閾値をあらわしている．</p>
<p>前述でグレースケール変換を行ったアリの動画で<code class="docutils literal"><span class="pre">Threshold</span></code>ブロックを用いた例を示す．</p>
<p><img alt="txt" src="../_images/uma_filtergenerator_binarize.png" />
<img alt="txt" src="../_images/uma_filtergenerator_binarizeexample.png" /></p>
</div>
<div class="section" id="exclude-the-obstacle-by-the-region-selector">
<span id="exclude-the-obstacle-by-the-region-selector"></span><h4>1.3.3.6. Exclude the Obstacle by the Region Selector<a class="headerlink" href="#exclude-the-obstacle-by-the-region-selector" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>解析に不要な領域が個体追跡の精度に悪影響を及ぼすことがある．
そこで範囲選択をおこなうことで，解析に不要な領域を除去する必要がある．</p>
<p><code class="docutils literal"><span class="pre">UMATracker-FilterGenerator</span></code>は矩形による選択<code class="docutils literal"><span class="pre">Rectangle</span> <span class="pre">selection</span></code>ブロック・楕円による選択<code class="docutils literal"><span class="pre">Circular</span> <span class="pre">selection</span></code>ブロック・任意の4頂点での範囲選択<code class="docutils literal"><span class="pre">Poly</span> <span class="pre">Selection</span></code>ブロックを有している．</p>
<table border="1" class="docutils" id="id4">
<caption><span class="caption-text">Selection/Exclusion Blocks</span><a class="headerlink" href="#id4" title="このテーブルへのパーマリンク">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="13%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Block Example</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="../_images/uma_filtergenerator_rectsel.png" class="first last" src="../_images/uma_filtergenerator_rectsel.png" />
</td>
<td>矩形</td>
<td><img alt="../_images/uma_filtergenerator_rectselexample.png" class="first last" src="../_images/uma_filtergenerator_rectselexample.png" />
</td>
</tr>
<tr class="row-odd"><td><img alt="../_images/uma_filtergenerator_circsel.png" class="first last" src="../_images/uma_filtergenerator_circsel.png" />
</td>
<td>楕円</td>
<td><img alt="../_images/uma_filtergenerator_circselexample.png" class="first last" src="../_images/uma_filtergenerator_circselexample.png" />
</td>
</tr>
<tr class="row-even"><td><img alt="../_images/uma_filtergenerator_polysel.png" class="first last" src="../_images/uma_filtergenerator_polysel.png" />
</td>
<td>4頂点</td>
<td><img alt="../_images/uma_filtergenerator_polyselexample.png" class="first last" src="../_images/uma_filtergenerator_polyselexample.png" />
</td>
</tr>
</tbody>
</table>
<p>前述で二値化を行ったアリの動画で<code class="docutils literal"><span class="pre">Circular</span> <span class="pre">selection</span></code>ブロックを用いた例を示す．
前段階ではシャーレの縁が写っていたが，<code class="docutils literal"><span class="pre">Circular</span> <span class="pre">selection</span></code>ブロックを用いることでシャーレ内のみを抜き出すことに成功している．</p>
<p><img alt="txt" src="../_images/uma_filtergenerator_excludeblock.png" />
<img alt="txt" src="../_images/uma_filtergenerator_excludeexample.png" /></p>
<iframe width="640" height="360" src="//www.youtube.com/embed/NRFRUSzR6xk?feature=player_detailpage" frameborder="0" allowfullscreen="1">&nbsp;</iframe><iframe width="640" height="360" src="//www.youtube.com/embed/fqht_bxmx3s?feature=player_detailpage" frameborder="0" allowfullscreen="1">&nbsp;</iframe><div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">各ブロックのチェックボックスをオフにすると，切り取られる領域が反転する．</p>
</div>
</div>
<div class="section" id="noise-reduction">
<span id="noise-reduction"></span><h4>1.3.3.7. Noise Reduction<a class="headerlink" href="#noise-reduction" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>動画ファイルにはノイズが必ず含まれる．ノイズの原因は，観察者の移動などで発生する照度の微妙な変化・実験環境に含まれる微妙なチリ・動物の糞など様々である．これらのノイズを極力排除することで，精度良く個体追跡をおこなえる．</p>
<p>最も簡単なノイズ除去は<code class="docutils literal"><span class="pre">Erosion</span></code>ブロックを使うことである．
Erosionは白色の領域を縮めるようなフィルタのことで，これを用いることで追跡物体よりも小さいノイズを除去することができる．
<img alt="txt" src="../_images/uma_filtergenerator_erosionexample.png" /></p>
<p>前述の不要な領域の除去を行ったアリの動画で<code class="docutils literal"><span class="pre">Erosion</span></code>ブロックを用いた例を示す．</p>
<p><img alt="txt" src="../_images/uma_filtergenerator_noisereduction.png" /></p>
</div>
<div class="section" id="save-filter-data">
<span id="save-filter-data"></span><h4>1.3.3.8. Save Filter Data<a class="headerlink" href="#save-filter-data" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>メニューより<code class="docutils literal"><span class="pre">Files/Save</span> <span class="pre">Filter</span> <span class="pre">Data</span></code>を選択することでフィルタデータ（拡張子<code class="docutils literal"><span class="pre">.filter</span></code>）が保存される．</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">Gray Scale変換・Binarizeを行っていない場合は個体追跡に失敗するので，保存前にGray Scale変換・Binarizeが行われていることを確認すること．</p>
</div>
</div>
</div>
</div>
<div class="section" id="umatracker-tracking">
<span id="umatracker-tracking"></span><h2>1.4. UMATracker-Tracking<a class="headerlink" href="#umatracker-tracking" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="tracking-window">
<span id="tracking-window"></span><h3>1.4.1. Tracking Window<a class="headerlink" href="#tracking-window" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下に<strong>UMATracker-Tracking</strong>の画面各部の名称および説明を示す．</p>
<p><img alt="txt" src="../_images/uma_tracking_mainwindow.png" /></p>
<ol>
<li><p class="first">個体追跡結果画面</p>
<p>入力動画と個体追跡結果を表示する．</p>
</li>
<li><p class="first">個体追跡パラメタ設定画面</p>
<p>個体数など，トラッキングで使用する値を変更する．設定可能なパラメタはトラッキングアルゴリズムより異なる．</p>
</li>
<li><p class="first">結果表示設定画面</p>
<p>個体追跡結果の表示の詳細を設定する項目．</p>
<ul>
<li><p class="first">Radius</p>
<p>結果画面に表示される個体位置を表す点の大きさを設定する．</p>
</li>
<li><p class="first">Line Width</p>
<p>結果画面に表示される個体の移動した軌跡の太さを設定する．</p>
</li>
<li><p class="first"># of overlay</p>
<p>前後何フレーム分の軌跡を結果画面に表示するかを設定する．</p>
</li>
</ul>
</li>
<li><p class="first">トラッキングアルゴリズム選択メニュー</p>
<p><strong>UMATracker-Tracking</strong>には複数の個体追跡アルゴリズムが搭載されており，それをトラッキングアルゴリズム選択メニューから
選択することができる．</p>
</li>
<li><p class="first">Filesメニュー</p>
<p>動画・フィルタの読み込み，トラッキング結果の保存をおこなう．</p>
</li>
</ol>
</div>
<div class="section" id="load-the-video-and-its-filter-data">
<span id="load-the-video-and-its-filter-data"></span><h3>1.4.2. Load the Video and its Filter data<a class="headerlink" href="#load-the-video-and-its-filter-data" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>はじめに解析対象の動画と前述の<strong>UMATracker-FilterGenerator</strong>で作成したフィルタデータをドラッグ&amp;ドロップで読み込む．
<img alt="txt" src="../_images/uma_tracking_loadvideo.png" />
<img alt="txt" src="../_images/uma_tracking_loadfilter.png" /></p>
</div>
<div class="section" id="set-the-parameter">
<span id="set-the-parameter"></span><h3>1.4.3. Set the Parameter<a class="headerlink" href="#set-the-parameter" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>つぎに個体追跡に必要なパラメタを個体追跡パラメタ設定画面で設定する．</p>
<p><img alt="txt" src="../_images/uma_tracking_setparameter.png" /></p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="block_ref.html" class="btn btn-neutral float-right" title="2. UMATracker-FilterGenerator Block Reference" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Welcome to UMATracker’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Rito Takeuchi.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>